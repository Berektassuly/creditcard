# creditcard

![Go Version](https://img.shields.io/badge/go-1.18+-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

Надежная утилита командной строки (CLI) для валидации, генерации и управления номерами кредитных карт. Инструмент написан на Go и спроектирован для эффективности, надежности и легкой интеграции в скрипты и автоматизированные процессы.

## Возможности

-   **Validate**: Проверка номера кредитной карты на валидность с использованием алгоритма Луна.
-   **Generate**: Создание валидных номеров карт по заданному шаблону.
-   **Information**: Получение информации о бренде и эмитенте карты на основе внешних файлов данных.
-   **Issue**: Генерация нового валидного номера карты для конкретного бренда и эмитента.

## Начало работы

### Требования

-   [Go](https://go.dev/doc/install) (рекомендуется версия 1.18 или новее).

### Установка

1.  **Склонируйте репозиторий:**
    ```bash
    git clone git@git.platform.alem.school:muberikta/creditcard.git
    ```

2.  **Перейдите в директорию проекта:**
    ```bash
    cd creditcard
    ```

3.  **Соберите исполняемый файл:**
    ```bash
    go build -o creditcard .
    ```
    Эта команда создаст исполняемый файл с именем `creditcard` в текущей директории.

## Использование

Утилита управляется через команды, каждая из которых имеет свой набор аргументов и флагов.

```bash
./creditcard <команда> [аргументы...] [флаги...]
```

## validate

Проверяет один или несколько номеров кредитных карт с использованием алгоритма Луна.

**Синтаксис**

```bash
./creditcard validate [--stdin] "<номер_карты_1>" ["<номер_карты_2>"...]
```

1.  <номер_карты...>: Список номеров карт для проверки, разделенных пробелами.
2.  --stdin: Читает номера карт из стандартного ввода (stdin) вместо аргументов.

**Поведение**

1.  Для каждого валидного номера выводит OK в STDOUT.
2.  Для каждого невалидного номера выводит INCORRECT в STDERR.
3.  Завершается со статусом 0, если все номера валидны, и 1, если хотя бы один невалиден.

**Примеры**

1.  Проверка одного валидного номера:

```bash
./creditcard validate "4400430180300003"
```

*Вывод в STDOUT:*

```bash
OK
```

2.  Проверка валидного и невалидного номеров:

```bash
./creditcard validate "4400430180300003" "4400430180300002"
```

*Вывод в STDOUT:*

```bash
OK
```

*Вывод в STDERR:*

```bash
INCORRECT
```

3.  Проверка через stdin:

```bash
echo "4400430180300003 4400430180300011" | ./creditcard validate --stdin
```

*Вывод в STDOUT:*

```bash
OK
OK
```

## generate

Генерирует все возможные валидные номера карт на основе шаблона.

**Синтаксис**

```bash
./creditcard generate [--pick] "<шаблон>"
```

1.  <шаблон>: Базовый номер карты, заканчивающийся 1-4 символами *.
2.  --pick: Случайным образом выбирает и выводит один валидный номер из сгенерированного списка.

**Поведение**

1.  Выводит отсортированный список валидных номеров карт в STDOUT.
2.  Завершается со статусом 1 в случае ошибки (например, неверный шаблон).

**Примеры**

1.  Генерация всех валидных номеров по шаблону:

```bash
./creditcard generate "440043018030**"
```

*Вывод:*

```bash
44004301803005
44004301803013
...
44004301803088
44004301803096
```

2.  Выбор одного случайного валидного номера:

```bash
./creditcard generate --pick "440043018030****"
```

*Пример вывода:*
```bash
4400430180304385
```

## information

Получает подробную информацию по одному или нескольким номерам карт.

**Синтаксис**

```bash
./creditcard information --brands=<файл> --issuers=<файл> [--stdin] "<номер_карты_1>" ["<номер_карты_2>"...]
```

1.  --brands=<файл>: (Обязательно) Путь к файлу с данными о брендах.
2.  --issuers=<файл>: (Обязательно) Путь к файлу с данными об эмитентах.
3.  --stdin: Читает номера карт из стандартного ввода.

**Примеры**
1.  Получение информации по валидной карте:

```bash
./creditcard information --brands=brands.txt --issuers=issuers.txt "4400430180300003"
```

*Вывод:*

```bash
4400430180300003
Correct: yes
Card Brand: VISA
Card Issuer: Kaspi Gold
```

2.  Получение информации по невалидной карте:

```bash
./creditcard information --brands=brands.txt --issuers=issuers.txt "4400450180300003"
```

*Вывод:*

```bash
4400450180300003
Correct: no
Card Brand: -
Card Issuer: -
```

## issue

Генерирует новый, случайный, валидный номер карты для указанного бренда и эмитента.

**Синтаксис**

```bash
./creditcard issue --brands=<файл> --issuers=<файл> --brand=<имя> --issuer=<имя>
```

1.  --brands=<файл>: (Обязательно) Путь к файлу с данными о брендах.
2.  --issuers=<файл>: (Обязательно) Путь к файлу с данными об эмитентах.
3.  --brand=<имя>: (Обязательно) Название желаемого бренда карты (например, "VISA").
4.  --issuer=<имя>: (Обязательно) Название желаемого эмитента карты (например, "Kaspi Gold").

**Примеры**
1.  Выпуск новой карты VISA от Kaspi Gold:

```bash
./creditcard issue --brands=brands.txt --issuers=issuers.txt --brand=VISA --issuer="Kaspi Gold"
```

*Пример вывода:*

```bash
4400438721908764
```

# Формат файлов данных

Команды information и issue используют файлы данных с определенным форматом. Каждая строка должна содержать название и префикс номера, разделенные двоеточием (:).

**Пример** brands.txt
```bash
VISA:4
MASTERCARD:51
MASTERCARD:52
AMEX:34
AMEX:37
```

**Пример** issuers.txt
```bash
Kaspi Gold:440043
Forte Black:404243
Halyk Bonus:440563
```

# Лицензия
*Этот проект распространяется под лицензией MIT.*